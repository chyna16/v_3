<!DOCTYPE html>

<html>
<head>
<link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="//d3js.org/d3.v3.min.js"></script>
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='bootstrap.css') }}">
<script src = "{{ url_for('static', filename='bootstrap.js')}}"></script>
<!-- <script type="text/javascript" src="{{ url_for('static', filename='charts.js') }}"></script> -->
<title>Results</title>
</head>

<body>

<style> body{
  font-family: 'Roboto Slab', serif;
}
</style>

  <nav class="navbar navbar-inverse" role="navigation">
      <div class="container">
        <nav>
          <ul class="nav nav-pills pull-right">
            <li role="presentation"><a href="#">Home</a></li>
            <li role="presentation"><a href="about.html">About</a></li>
            <li role="presentation"><a href="#">Contact</a></li>
          </ul>
        </nav>
        <a class="navbar-brand" href="/">V3</a>
      </div>    
  </nav>

<h1>Results for {{repo_name}} repository</h1>
<!--   <p style="float:left">
  {% for t in dataArray %}
  {{t}}
  {% endfor %}
  </p> -->
  <p> Automatic: <br> {{dataArray}} </p>

  <p> Manual entry:  <br> {% set dataType = ["statistic", "number-of-commits", "number-of-entities", "number-of-entities-changed", "number-of-authors"] %}
  <br>
  {{ ["value", "26", "24", "64", "3"]}} </p>


{% for x in dataType %}
{{x}},
{% endfor %}
  <!-- <p>
  {% for v in dataValue %}
   {{v[1]}}
  {% endfor %}
  </p> -->
<h2> Table </h2>
<div class="row">
        <div class="col-md-6">
          <table class="table">
            <thead>
              <tr>
              <th> # </th>
              {% for x in dataType %}
                <th> {{ x }} </th>
              {% endfor %}
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                {for}
                <td>Mark</td>
                <td>Otto</td>
                <td>@mdo</td>
              </tr>
              <tr>
                <td>2</td>
                <td>Jacob</td>
                <td>Thornton</td>
                <td>@fat</td>
              </tr>
              <tr>
                <td>3</td>
                <td>Larry</td>
                <td>the Bird</td>
                <td>@twitter</td>
              </tr>
            </tbody>
          </table>
        </div>

   <p><button class="btn btn-lg btn-default" role="button" onclick="goBack()">Go Back</button></p>

  <script>
  function goBack() {
      window.history.back();
  }
  </script>
<style>
.chart div {
  font: 10px sans-serif black;
  background-color: steelblue;
  text-align: right;
  padding: 3px;
  margin: 2px;
}
</style>
<!-- <a class="btn btn-primary" role="button" data-toggle="collapse" href = "#" onclick="barGraph()" aria-expanded="false" aria-controls="collapseExample">
  Bar Graph
</a>
<div class="collapse" id="collapseExample">
  <div class="chart" onclick="barGraph()">
    barGraph()
  </div> -->

  <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#wrapperBar" onclick="barGraph()">Bar Graph</button>
  <div id="demo" class="collapse">

  </div>

  <button type="button" class="btn btn-info" data-toggle="collapse" data-target="#wrapperPie" onclick="pieChart()">Pie Chart</button>
  <div id="demo" class="collapse">

  </div>

  <!-- onclick="pieChart()" -->

<!-- <a class="btn btn-primary" role="button" data-toggle="collapse" href="#collapseBar" aria-expanded="false" onclick="barGraph()">
  Bar Graph
</a>
<div class="collapse" id="collapseBar"> -->

<!-- 
<h2><a href= "#" onclick="scatterPlot()">Scatter Plot</a></h2>
<h2><a href = "#" onclick="barGraph()">Bar Graph</a></h2>
<h2><a href = "#" onclick="pieChart()">Pie Chart</a></h2> -->

<div id="wrapperBar" class="chart"></div>
<div id="wrapperPie"></div>
<div id="wrapperScatter"></div>

<script>
var dataArray = {{dataArray|safe}}

var height = 300, width = 500;
var radius = height / 2 - 10;
var padding = 50;

// FIX: the axis values are determined manually here, not automated
var type = [];
var value = [];
var value2 = [];

for (i = 1; i < dataArray[0].length; i++) {
  type.push(dataArray[0][i]);
}
for (i = 1; i < dataArray[1].length; i++) {
  value.push(dataArray[1][i]);
}
for (i = 1; i < dataArray[2].length; i++) {
  value2.push(dataArray[2][i]);
}

function scatterPlot() {
  // FIX: summary.csv shows a skewed range
  // FIX: automated spacing between plot points

  var plot = d3.select("#wrapperScatter").append('svg')
      .attr('id', 'plot')
      .attr('height', height + padding * 2)
      .attr('width', width + padding * 2)
      .style('padding', padding)
      .append('g')
      .attr('id', 'viz')
      .attr('transform', 'translate(' + padding + ',' + padding + ')');

  var xScale = d3.scale.ordinal().domain(type).rangePoints([0, width]);
  var yScale = d3.scale.linear().range([height, 10]);
  var yDomain = [0, d3.max(value)]
  yScale.domain(yDomain);

  var xAxis = d3.svg.axis()
        .scale(xScale)
        .orient("bottom")
        .ticks(6);
  var yAxis = d3.svg.axis()
        .scale(yScale)
        .orient("left")
        .ticks(3);

  plot.append("g")
        .attr('class', 'y axis')
        .call(yAxis);
  plot.append("g")
        .attr('class', 'x axis')
        .attr('transform', 'translate(0,' + height + ')')
        .call(xAxis);

  var dots = plot.selectAll('circle')
        .data(value)
        .enter()
        .append('circle');

  dots.attr('r', 5)
    .attr('cx', function(d, i) {
      return i * 20 })
    .attr('cy', function(d) {
      return yScale(d) });
}

function barGraph() {
  var x = d3.scale.linear()
    .domain([0, d3.max(value)])
    .range([0, 420]);

  var bar = d3.select("#wrapperBar")
    .selectAll("div")
      .data(value)
    .enter().append("div")
      .style("width", function(d) { return d + "px"; })
      .data(type)
      .text(function(d) { return d; });
}

function pieChart() {
  var arc = d3.svg.arc()
    .innerRadius(radius - 40)
    .outerRadius(radius);

  var pie = d3.layout.pie()
      .padAngle(.02);

  var color = d3.scale.category10();

  var svg = d3.select("#wrapperPie").append("svg")
      .attr("width", width)
      .attr("height", height)
    .append("g")
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

  svg.selectAll("path")
      .data(pie(value))
    .enter().append("path")
      .style("fill", function(d, i) { return color(i); })
      .attr("d", arc);
}

</script>

</body>
</html>
